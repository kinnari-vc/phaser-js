<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Animation</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.15.1/dist/phaser-arcade-physics.min.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>

<body>
    <script type="text/javascript">
        var config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        var game = new Phaser.Game(config);

        function preload() {
            this.load.atlas('walker', './assets/walker.png', './assets/walker.json');
            this.load.image('sky', './assets/ms3-sky.png');
            this.load.image('trees', './assets/ms3-trees.png');
        }

        function create() {
            this.bg = this.add.tileSprite(0, 38, 800, 296, 'sky')
                .setOrigin(0, 0);
            this.trees = this.add.tileSprite(0, 280, 800, 320, 'trees')
                .setOrigin(0, 0);

            const animConfig = {
                key: 'walk',
                frames: 'walker',
                frameRate: 60,
                repeat: -1
            };
            this.anims.create(animConfig);

            const sprite = this.add.sprite(400, 484, 'walker');
            sprite.play('walk');
        }

        function update() {
            this.bg.tilePositionX -= 1;
            this.trees.tilePositionX -= 4;
        }
    </script>

</body>

</html>